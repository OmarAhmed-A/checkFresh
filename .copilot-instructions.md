# GitHub Copilot Instructions for CheckFresh Mobile App

## Project Overview
This is a React Native Expo app that uses a pre-trained TensorFlow model to classify fruit freshness. The app should take camera photos and predict if fruits (apples, bananas, oranges) are fresh or rotten using the FinalModel.96.8.h5 model.

## Model Details
- **Model**: VGG16-based transfer learning model
- **Input**: 224x224x3 RGB images
- **Output**: 6 classes (freshapples, freshbanana, freshoranges, rottenapples, rottenbanana, rottenoranges)
- **Accuracy**: 96.8%
- **Architecture**: VGG16 base + GlobalAveragePooling2D + Dense(6, softmax)

## Technology Stack
- **Framework**: React Native with Expo
- **ML**: TensorFlow.js
- **Camera**: expo-camera
- **Navigation**: expo-router
- **Language**: TypeScript

## Key Requirements

### Functionality
1. **Camera Integration**: Use expo-camera to take photos
2. **Model Loading**: Load and use the converted TensorFlow.js model locally
3. **Image Preprocessing**: Resize images to 224x224, normalize pixel values
4. **Prediction**: Classify fruit freshness with confidence scores
5. **Results Display**: Show prediction with confidence percentage

### Code Guidelines
1. **TypeScript**: Use proper typing throughout
2. **Error Handling**: Handle camera permissions, model loading errors
3. **Performance**: Optimize model loading and prediction speed
4. **Accessibility**: Include proper accessibility labels
5. **Code Quality**: Follow React Native and Expo best practices

### File Structure
```
app/
  (tabs)/
    index.tsx          # Main camera/prediction screen
    explore.tsx        # Model info/settings screen
  _layout.tsx
components/
  CameraView.tsx       # Camera component
  PredictionResult.tsx # Results display component
  ModelLoader.tsx      # Model loading component
utils/
  modelUtils.ts        # Model loading and prediction utilities
  imageUtils.ts        # Image preprocessing utilities
assets/
  model/              # Converted TensorFlow.js model files
```

### Dependencies Needed
- @tensorflow/tfjs
- @tensorflow/tfjs-react-native
- @tensorflow/tfjs-platform-react-native
- expo-camera
- expo-media-library
- expo-file-system

### Model Conversion Notes
- Convert FinalModel.96.8.h5 to TensorFlow.js format using tensorflowjs_converter
- Ensure model files are properly bundled with the app
- Handle model loading asynchronously with proper loading states

### UI/UX Guidelines
- **MVP First**: Start with minimal, functional interface
- **Progressive Enhancement**: Add polish after core functionality works
- **Native Feel**: Use React Native components and patterns
- **Responsive**: Support different screen sizes
- **Feedback**: Provide clear loading states and error messages

## Common Patterns to Use

### Model Loading Pattern
```typescript
const loadModel = async () => {
  try {
    setLoading(true);
    const modelUrl = 'path/to/model.json';
    const model = await tf.loadLayersModel(modelUrl);
    setModel(model);
  } catch (error) {
    setError('Failed to load model');
  } finally {
    setLoading(false);
  }
};
```

### Image Preprocessing Pattern
```typescript
const preprocessImage = (imageUri: string) => {
  return tf.tidy(() => {
    // Load image, resize to 224x224, normalize
    // Return tensor ready for prediction
  });
};
```

### Prediction Pattern
```typescript
const predict = async (imageTensor: tf.Tensor) => {
  const prediction = model.predict(imageTensor) as tf.Tensor;
  const scores = await prediction.data();
  return {
    class: getClassFromScores(scores),
    confidence: Math.max(...scores)
  };
};
```

## Development Priorities
1. **Core Functionality**: Camera + Model + Basic Prediction
2. **Error Handling**: Permissions, loading failures
3. **Performance**: Model loading optimization
4. **Polish**: UI improvements, animations
5. **Features**: Additional functionality

## Testing Strategy
- Test camera permissions on different devices
- Verify model predictions with known images
- Test performance with various image sizes
- Validate error handling scenarios
